# LangChain My Code Agent

## 개요
`LangChain My Code Agent`는 `LangChain` 및 `GPT-5-mini`를 기반으로 구축된 명령줄 인터페이스(CLI) 에이전트입니다. 이 에이전트는 로컬 파일 시스템을 관리하고 터미널 명령을 실행하여 개발 작업을 자동화하도록 설계되었습니다. 사용자의 자연어 요청을 이해하고, 필요한 도구를 순차적으로 사용하여 작업을 완료합니다.

## 에이전트 구조
이 프로젝트는 **메인-서브 에이전트 계층 구조**를 사용합니다:

*   **메인 에이전트** (초록색 출력)
    - 사용자 요청을 분석하고 작업 계획 수립
    - 작업을 중간 단위로 나누어 서브 에이전트에게 위임
    - 작업 진행 상황을 사용자에게 설명
    
*   **서브 에이전트** (청록색 출력)
    - 메인 에이전트의 지시에 따라 실제 작업 수행
    - 파일 시스템 관리 및 터미널 명령 실행
    - 작업 완료 후 결과를 메인 에이전트에게 반환

## 주요 기능
*   **계층적 작업 관리**: 메인 에이전트가 작업을 계획하고 서브 에이전트가 실행
*   **파일 시스템 관리**: 파일 목록, 읽기, 쓰기, 편집 등 로컬 파일 시스템에 대한 다양한 작업을 수행합니다.
*   **터미널 명령 실행**: 필요한 경우 시스템 터미널 명령을 실행하여 복잡한 작업을 처리합니다.
*   **터미널 백그라운드 실행**: 백그라운드 실행과 로그 파일을 생성합니다.
*   **실시간 스트리밍 출력**: AI 응답을 실시간으로 스트리밍하여 표시합니다.
*   **실행 중단**: AI 응답 중 ESC 입력 시 중지 후 사용자 대기, 터미널 명령어 종료.
*   **세션 관리**: 대화 기록을 유지하고 필요 시 초기화할 수 있습니다.
*   **토큰 사용량 추적**: 입력/출력 토큰 사용량을 자동으로 추적합니다.

## 설치 및 실행

### 1. 환경 설정
프로젝트 루트에 `.env` 파일을 생성하고, OpenAI API 키를 다음과 같이 추가합니다:
```
OPENAI_API_KEY="YOUR_OPENAI_API_KEY"
```

### 2. 의존성 설치
`requirements.txt`에 명시된 모든 Python 의존성을 설치합니다:
```bash
pip install -r requirements.txt
```

### 3. 에이전트 실행
애플리케이션의 메인 스크립트를 실행합니다:
```bash
python main.py
```

또는 배치 파일을 사용하여 실행:
(파이썬 가상환경으로 실행)
```bash
ai.bat
```

## 사용법
에이전트가 실행되면 프롬프트가 나타나고, 여기에 자연어 명령을 입력할 수 있습니다.

### 명령어
에이전트와의 상호작용을 제어하기 위한 몇 가지 특수 명령어가 있습니다:
*   `/allow`: 에이전트의 파일 시스템 변경 또는 터미널 명령어 실행 요청을 자동으로 승인합니다.
*   `/deny`: 자동 승인 모드를 비활성화하고, 에이전트의 모든 실행 요청에 대해 수동 승인을 요구합니다.
*   `/status`: 현재 에이전트의 승인 모드 상태를 표시합니다.
*   `/reset`: 현재 대화 기록을 초기화하고 새 세션을 시작합니다.
*   `종료`, `quit`, `exit`, `q`: 에이전트 애플리케이션을 종료합니다.


## 프로젝트 구조
```
langchainDev/
├── agent/                  # 에이전트 패키지
│   ├── __init__.py        # 패키지 초기화
│   ├── context.py         # 전역 컨텍스트 및 설정
│   ├── utils.py           # 유틸리티 함수들 (키보드 입력, 로깅)
│   ├── ui.py              # UI 관련 함수들 (출력 포맷, 미리보기)
│   ├── tools.py           # 서브 에이전트 도구 정의
│   ├── sub_agent.py       # 서브 에이전트 구현
│   └── debug.py           # 디버깅 도구
├── temp_logs/             # 로그 파일
│   ├── chat_log.txt       # 채팅 로그
│   └── *.log              # 터미널 명령어 로그
├── main.py                # 메인 실행 파일 (메인 에이전트)
├── ai.bat                 # Windows 배치 실행 파일
├── .env                   # 환경 변수 (API 키)
├── requirements.txt       # Python 의존성
└── README.md              # 프로젝트 문서
```


## 로깅
모든 대화와 작업 내역은 `temp_logs/chat_log.txt`에 자동으로 기록됩니다. 로그에는 다음 정보가 포함됩니다:
*   사용자 입력
*   AI 응답
*   도구 호출 및 결과
*   에러 및 중단 이벤트

## 참고
*   이 에이전트는 개발 작업을 돕기 위해 강력한 파일 시스템 및 터미널 제어 기능을 가지고 있습니다.

